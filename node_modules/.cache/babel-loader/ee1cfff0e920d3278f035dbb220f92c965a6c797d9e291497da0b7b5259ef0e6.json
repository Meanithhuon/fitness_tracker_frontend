{"ast":null,"code":"import _regeneratorRuntime from\"/Users/claytonc/Desktop/Coding_Stuff/Bootcamp/strangers-things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/claytonc/Desktop/Coding_Stuff/Bootcamp/strangers-things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import{useNavigate,Link}from'react-router-dom';var baseURL='https://strangers-things.herokuapp.com/api/2209-FTB-MT-WEB-PT';var Login=function Login(_ref){var username=_ref.username,password=_ref.password,setTokenFromParent=_ref.setTokenFromParent,setUsernameFromParent=_ref.setUsernameFromParent,setPasswordFromParent=_ref.setPasswordFromParent;var navigate=useNavigate();var handleLogin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fetch(\"\".concat(baseURL,\"/users/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{username:\"\".concat(username),password:\"\".concat(password)}})}).then(function(response){return response.json();}).then(function(result){if(result.success){setTokenFromParent(result.data.token);window.localStorage.setItem('token',result.data.token);navigate('/profile');}else if(result.error.message){alert(\"This account has already been registered. Please login or try a different username\");}});case 1:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{id:\"login\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login-div\"},/*#__PURE__*/React.createElement(\"form\",{className:\"login\",onSubmit:function onSubmit(event){event.preventDefault();handleLogin();}},/*#__PURE__*/React.createElement(\"h2\",null,\"Log in\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Username*\",onChange:function onChange(event){return setUsernameFromParent(event.target.value);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"Password*\",onChange:function onChange(event){return setPasswordFromParent(event.target.value);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",null,\"Log In\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",null,\"Not a Member? \",/*#__PURE__*/React.createElement(Link,{to:\"/register\"},\"Register\")))));};export default Login;","map":{"version":3,"names":["React","useNavigate","Link","baseURL","Login","username","password","setTokenFromParent","setUsernameFromParent","setPasswordFromParent","navigate","handleLogin","fetch","method","headers","body","JSON","stringify","user","then","response","json","result","success","data","token","window","localStorage","setItem","error","message","alert","event","preventDefault","target","value"],"sources":["/Users/claytonc/Desktop/Coding_Stuff/Bootcamp/strangers-things/src/components/Login.js"],"sourcesContent":["import React from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\n\nconst baseURL = 'https://strangers-things.herokuapp.com/api/2209-FTB-MT-WEB-PT'\n\n\nconst Login = ({username, password, setTokenFromParent, setUsernameFromParent, setPasswordFromParent}) => {\n    const navigate = useNavigate();\n\n    const handleLogin = async () => {\n        \n        fetch(`${baseURL}/users/login`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                user: {\n                    username: `${username}`,\n                    password: `${password}`\n                }\n            })\n        }).then (response => response.json())\n          .then (result => {\n\n            if (result.success) {\n                setTokenFromParent(result.data.token);\n                window.localStorage.setItem('token', result.data.token);\n                navigate('/profile');\n            } else if (result.error.message) {\n                alert(\"This account has already been registered. Please login or try a different username\")\n            }\n          })            \n}\n    return (\n        <div id=\"login\">\n            <div className='login-div'>\n                <form className=\"login\" onSubmit={(event) => \n                {event.preventDefault();\n                handleLogin(); }}>\n                    <h2>Log in</h2>\n                    <br></br>\n\n                    <input type=\"text\" placeholder=\"Username*\" onChange={(event) => setUsernameFromParent(event.target.value)}/>\n                    <br></br>\n                    <br></br>\n\n                    <input type=\"password\" placeholder=\"Password*\" onChange={(event) => setPasswordFromParent(event.target.value)}/>\n                    <br></br>\n                    <br></br>\n\n                    <button>Log In</button>\n                    <br></br>\n                    <br></br>\n                    <p>Not a Member? <Link to=\"/register\">Register</Link></p>\n                </form>\n            </div>\n        </div>\n    )\n}\n\nexport default Login;"],"mappings":"wTAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,WAAW,CAAEC,IAAI,KAAQ,kBAAkB,CAEpD,GAAMC,QAAO,CAAG,+DAA+D,CAG/E,GAAMC,MAAK,CAAG,QAARA,MAAK,MAA+F,IAA1FC,SAAQ,MAARA,QAAQ,CAAEC,QAAQ,MAARA,QAAQ,CAAEC,kBAAkB,MAAlBA,kBAAkB,CAAEC,qBAAqB,MAArBA,qBAAqB,CAAEC,qBAAqB,MAArBA,qBAAqB,CAChG,GAAMC,SAAQ,CAAGT,WAAW,EAAE,CAE9B,GAAMU,YAAW,6FAAG,qIAEhBC,KAAK,WAAIT,OAAO,iBAAgB,CAC5BU,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBC,IAAI,CAAE,CACFb,QAAQ,WAAKA,QAAQ,CAAE,CACvBC,QAAQ,WAAKA,QAAQ,CACzB,CACJ,CAAC,CACL,CAAC,CAAC,CAACa,IAAI,CAAE,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAI,EAAE,GAAC,CAClCF,IAAI,CAAE,SAAAG,MAAM,CAAI,CAEf,GAAIA,MAAM,CAACC,OAAO,CAAE,CAChBhB,kBAAkB,CAACe,MAAM,CAACE,IAAI,CAACC,KAAK,CAAC,CACrCC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEN,MAAM,CAACE,IAAI,CAACC,KAAK,CAAC,CACvDf,QAAQ,CAAC,UAAU,CAAC,CACxB,CAAC,IAAM,IAAIY,MAAM,CAACO,KAAK,CAACC,OAAO,CAAE,CAC7BC,KAAK,CAAC,oFAAoF,CAAC,CAC/F,CACF,CAAC,CAAC,uDACX,kBAxBSpB,YAAW,2CAwBpB,CACG,mBACI,2BAAK,EAAE,CAAC,OAAO,eACX,2BAAK,SAAS,CAAC,WAAW,eACtB,4BAAM,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAE,kBAACqB,KAAK,CACxC,CAACA,KAAK,CAACC,cAAc,EAAE,CACvBtB,WAAW,EAAE,CAAE,CAAE,eACb,uCAAe,cACf,8BAAS,cAET,6BAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,CAAE,kBAACqB,KAAK,QAAKxB,sBAAqB,CAACwB,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,EAAC,EAAE,cAC5G,8BAAS,cACT,8BAAS,cAET,6BAAO,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,CAAE,kBAACH,KAAK,QAAKvB,sBAAqB,CAACuB,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,EAAC,EAAE,cAChH,8BAAS,cACT,8BAAS,cAET,2CAAuB,cACvB,8BAAS,cACT,8BAAS,cACT,2DAAiB,oBAAC,IAAI,EAAC,EAAE,CAAC,WAAW,aAAgB,CAAI,CACtD,CACL,CACJ,CAEd,CAAC,CAED,cAAe/B,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}