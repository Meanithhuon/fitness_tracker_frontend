{"ast":null,"code":"import _regeneratorRuntime from\"/Users/claytonc/Desktop/Coding_Stuff/Bootcamp/strangers-things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/claytonc/Desktop/Coding_Stuff/Bootcamp/strangers-things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/claytonc/Desktop/Coding_Stuff/Bootcamp/strangers-things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate,NavLink}from'react-router-dom';var Posts=function Posts(_ref){var token=_ref.token;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),postID=_useState4[0],setPostID=_useState4[1];var navigate=useNavigate();useEffect(function(){fetch(\"https://strangers-things.herokuapp.com/api/2209-FTB-MT-WEB-PT/posts\",{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}}).then(function(response){return response.json();}).then(function(result){setPosts(result.data.posts);posts&&posts.map(function(post){setPostID(post._id);});});},[token]);var navigateToNewPostForm=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:navigate('/posts/addpost');case 1:case\"end\":return _context.stop();}}},_callee);}));return function navigateToNewPostForm(){return _ref2.apply(this,arguments);};}();var deletePost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"https://strangers-things.herokuapp.com/api/2209-FTB-MT-WEB-PT/posts/\".concat(postID),{method:\"DELETE\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:data=_context2.sent;confirm(\"Are you sure you want to delete this post?\");return _context2.abrupt(\"return\",data);case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.log('error deleting post');case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function deletePost(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{id:\"posts\"},token?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"All Posts:\"),/*#__PURE__*/React.createElement(\"button\",{onClick:navigateToNewPostForm},\"Create New Post\")):/*#__PURE__*/React.createElement(\"h1\",null,\"All Posts:\"),posts&&posts.map(function(post){return/*#__PURE__*/React.createElement(\"div\",{key:post._id,className:post.isAuthor?'post-div myPosts':'post-div'},/*#__PURE__*/React.createElement(\"h3\",null,post.title),/*#__PURE__*/React.createElement(\"p\",{className:\"bold\"},\"Description: \",/*#__PURE__*/React.createElement(\"span\",{className:\"normal-font\"},post.description)),/*#__PURE__*/React.createElement(\"p\",{className:\"bold\"},\"Seller: \",/*#__PURE__*/React.createElement(\"span\",{className:\"normal-font\"},post.author.username)),/*#__PURE__*/React.createElement(\"p\",{className:\"bold\"},\"Price: \",/*#__PURE__*/React.createElement(\"span\",{className:\"normal-font\"},post.price)),/*#__PURE__*/React.createElement(\"p\",{className:\"bold\"},\"Location: \",/*#__PURE__*/React.createElement(\"span\",{className:\"normal-font\"},post.location)),/*#__PURE__*/React.createElement(\"p\",null,\"Post ID: \",post._id),post.isAuthor?/*#__PURE__*/React.createElement(\"button\",null,\"Edit\"):null,post.isAuthor?/*#__PURE__*/React.createElement(\"button\",{onClick:deletePost},\"Delete\"):null,token&&!post.isAuthor?/*#__PURE__*/React.createElement(\"button\",null,\"Send Message\"):null);}));};export default Posts;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","NavLink","Posts","token","posts","setPosts","postID","setPostID","navigate","fetch","headers","then","response","json","result","data","map","post","_id","navigateToNewPostForm","deletePost","method","confirm","console","log","isAuthor","title","description","author","username","price","location"],"sources":["/Users/claytonc/Desktop/Coding_Stuff/Bootcamp/strangers-things/src/components/Posts.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate, NavLink } from 'react-router-dom';\n\nconst Posts = ({token}) => {\n    const [posts, setPosts] = useState([]);\n    const [postID, setPostID] = useState('');\n    const navigate = useNavigate();\n\n    useEffect(() => {\n            fetch(\"https://strangers-things.herokuapp.com/api/2209-FTB-MT-WEB-PT/posts\", {\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}` \n                },\n            })\n                .then(response => response.json())\n                .then(\n                    (result) => {\n                        setPosts(result.data.posts);\n\n                        posts && posts.map((post) => {\n                            setPostID(post._id);\n                        })\n                        \n                    }\n                )\n    }, [token])\n\n    const navigateToNewPostForm = async () => {\n        navigate('/posts/addpost');           \n        };\n\n    const deletePost = async () => {\n        try {\n            const response = await fetch(`https://strangers-things.herokuapp.com/api/2209-FTB-MT-WEB-PT/posts/${postID}`, {\n            method: \"DELETE\",\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            }\n        })\n            const data = await response.json();\n            confirm(\"Are you sure you want to delete this post?\");\n            return data;\n        } catch(error) {\n            console.log('error deleting post')\n        }\n    }\n\n    return (\n        <div id=\"posts\">\n            \n            {\n                token ? (\n                    <div>\n                        <h1>All Posts:</h1>\n                        <button onClick={navigateToNewPostForm}>Create New Post</button>\n                    </div>\n                ) : (\n                    <h1>All Posts:</h1>\n                )\n            }\n            \n           \n            {\n                posts && posts.map((post) => {\n\n                    return (\n                        <div key={post._id} className={post.isAuthor ? 'post-div myPosts' : 'post-div'}>\n                            <h3>{post.title}</h3>\n                            <p className='bold'>Description: <span className='normal-font'>{post.description}</span></p>\n                            <p className='bold'>Seller: <span className='normal-font'>{post.author.username}</span></p>\n                            <p className='bold'>Price: <span className='normal-font'>{post.price}</span></p>\n                            <p className='bold'>Location: <span className='normal-font'>{post.location}</span></p>\n                            <p>Post ID: {post._id}</p>\n                            {post.isAuthor ? <button>Edit</button> : null}\n                            {post.isAuthor ? <button onClick={deletePost}>Delete</button> : null}\n                            {token && !post.isAuthor ? <button>Send Message</button> : null}\n                        </div>\n                    )\n                })\n            }  \n        </div>\n    )\n}\n\nexport default Posts;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}